{"ast":null,"code":"import _slicedToArray from \"/home/andris/test_django/django_mqtt/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/andris/test_django/django_mqtt/frontend/src/components/todos-list.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport TodoDataService from '../services/todos';\nimport { Link } from 'react-router-dom';\nimport Card from 'react-bootstrap/Card';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\nimport moment from 'moment';\n\nvar TodosList = function TodosList(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      todos = _useState2[0],\n      setTodos = _useState2[1];\n\n  useEffect(function () {\n    retrieveTodos();\n  }, [props.token]);\n\n  var retrieveTodos = function retrieveTodos() {\n    TodoDataService.getAll(props.token).then(function (response) {\n      setTodos(response.data);\n    }).catch(function (e) {\n      console.log(e);\n    });\n  };\n\n  var deleteTodo = function deleteTodo(todoId) {\n    TodoDataService.deleteTodo(todoId, props.token).then(function (response) {\n      retrieveTodos();\n    }).catch(function (e) {\n      console.log(e);\n    });\n  };\n\n  var completeTodo = function completeTodo(todoId) {\n    TodoDataService.completeTodo(todoId, props.token).then(function (response) {\n      retrieveTodos();\n      console.log(\"completeTodo\", todoId);\n    }).catch(function (e) {\n      console.log(e);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, props.token == null || props.token === \"\" ? /*#__PURE__*/React.createElement(Alert, {\n    variant: \"warning\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"You are not logged in. Please \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 41\n    }\n  }, \"login\"), \" to see your todos.\") : /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/todos/create\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"outline-info\",\n    className: \"mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, \"Add To-do\")), todos.map(function (todo) {\n    return /*#__PURE__*/React.createElement(Card, {\n      key: todo.id,\n      className: \"mb-3\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Card.Body, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(todo.completed ? \"text-decoration-line-through\" : \"\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Card.Title, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, todo.title), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 32\n      }\n    }, \"Memo:\"), \" \", todo.memo), /*#__PURE__*/React.createElement(Card.Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    }, \"Date created: \", moment(todo.created).format(\"Do MMMM YYYY\"))), !todo.completed && /*#__PURE__*/React.createElement(Link, {\n      to: {\n        pathname: \"/todos/\" + todo.id,\n        state: {\n          currentTodo: todo\n        }\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-info\",\n      className: \"me-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 23\n      }\n    }, \"Edit\")), /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-danger\",\n      onClick: function onClick() {\n        return deleteTodo(todo.id);\n      },\n      className: \"me-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 19\n      }\n    }, \"Delete\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"outline-success\",\n      onClick: function onClick() {\n        return completeTodo(todo.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }, \"Complete\")));\n  })));\n};\n\nexport default TodosList;","map":{"version":3,"names":["React","useState","useEffect","TodoDataService","Link","Card","Container","Button","Alert","moment","TodosList","props","todos","setTodos","retrieveTodos","token","getAll","then","response","data","catch","e","console","log","deleteTodo","todoId","completeTodo","map","todo","id","completed","title","memo","created","format","pathname","state","currentTodo"],"sources":["/home/andris/test_django/django_mqtt/frontend/src/components/todos-list.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport TodoDataService from '../services/todos';\nimport { Link } from 'react-router-dom';\nimport Card from 'react-bootstrap/Card';\nimport Container from 'react-bootstrap/Container';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\nimport moment from 'moment';\n\nconst TodosList = props => {\n  const [todos, setTodos] = useState([]);\n\n  useEffect(() => {\n    retrieveTodos();\n  }, [props.token]);\n\n  const retrieveTodos = () => {\n    TodoDataService.getAll(props.token)\n      .then(response => {\n        setTodos(response.data);\n      })\n      .catch(e => {\n        console.log(e);\n      });\n  }\n\n  const deleteTodo = (todoId) => {\n    TodoDataService.deleteTodo(todoId, props.token)\n      .then(response => {\n        retrieveTodos();\n      })\n      .catch(e => {\n        console.log(e);\n      });\n  }\n\n  const completeTodo = (todoId) => {\n    TodoDataService.completeTodo(todoId, props.token)\n      .then(response => {\n        retrieveTodos();\n        console.log(\"completeTodo\", todoId);\n      })\n      .catch(e => {\n        console.log(e);\n      })\n  }\n\n  return (\n    <Container>\n      {props.token == null || props.token === \"\" ? (\n        <Alert variant='warning'>\n          You are not logged in. Please <Link to={\"/login\"}>login</Link> to see your todos.\n        </Alert>\n      ) : (\n        <div>\n          <Link to={\"/todos/create\"}>\n            <Button variant=\"outline-info\" className=\"mb-3\">\n              Add To-do\n            </Button>\n          </Link>\n          {todos.map((todo) => {\n            return (\n              <Card key={todo.id} className=\"mb-3\">\n                <Card.Body>\n                  <div className={`${todo.completed ? \"text-decoration-line-through\" : \"\"}`}>\n                    <Card.Title>{todo.title}</Card.Title>\n                    <Card.Text><b>Memo:</b> {todo.memo}</Card.Text>\n                    <Card.Text>\n                      Date created: {moment(todo.created).format(\"Do MMMM YYYY\")}\n                    </Card.Text>\n                  </div>\n                  {!todo.completed &&\n                    <Link to={{\n                      pathname: \"/todos/\" + todo.id,\n                      state: {\n                        currentTodo: todo\n                      }\n                    }}>\n                      <Button variant=\"outline-info\" className=\"me-2\">\n                        Edit\n                      </Button>\n                    </Link>\n                  }\n                  <Button variant=\"outline-danger\" onClick={() => deleteTodo(todo.id)} className=\"me-2\">\n                    Delete\n                  </Button>\n                  <Button variant=\"outline-success\" onClick={() => completeTodo(todo.id)}>\n                    Complete\n                  </Button>\n                </Card.Body>\n              </Card>\n            )\n          })}\n        </div>\n      )}\n    </Container>\n  );\n}\n\nexport default TodosList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}